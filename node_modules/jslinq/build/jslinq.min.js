//! jslinq
//! Another LINQ provider for Javascript
//! version : 1.0.14
//! authors : maurobussini
//! license : MIT
//! built   : 2015-05-20
//! https://github.com/maurobussini/jslinq
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.jslinq=b()}(this,function(){function a(a){if(!a)throw new Error("Provided data is invalid");if(!(a instanceof Array))throw new Error("Provided data is not a valid array");return this.items=a,this.select=d,this.where=c,this.groupBy=e,this.join=f,this.intersect=v,this.distinct=g,this.orderBy=h,this.orderByDescending=i,this.selectMany=j,this.singleOrDefault=k,this.firstOrDefault=l,this.lastOrDefault=m,this.any=n,this.all=o,this.toList=p,this.count=q,this.skip=r,this.take=s,this.max=t,this.min=u,this.remove=w,this.subtract=x,this.sum=y,this.average=z,this}function b(a,c){if(a===c)return!0;if(a==c)return!0;if(typeof a!=typeof c)return!1;if("object"!=typeof a)return a==c;for(var d in a){var e=a[d],f=c[d],g="object"==typeof e?b(e,f):e==f;if(!g)return!1}return!0}function c(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){var e=b(this.items[d]);e&&c.push(this.items[d])}return new a(c)}function d(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){var e=b(this.items[d]);c.push(e)}return new a(c)}function e(c){if(!c)throw new Error("Expression is invalid");for(var d=[],e=0;e<this.items.length;e++){for(var f=c(this.items[e]),g=null,h=0;h<d.length;h++)if(b(d[h].key,f)){g=d[h];break}g||(g={key:f,count:0,elements:[]},d.push(g)),g.count++,g.elements.push(this.items[e])}return new a(d)}function f(b){if(!b)return new a(this.items);for(var c=[],d=0;d<this.items.length;d++)c.push(this.items[d]);for(var e=0;e<b.length;e++)c.push(b[e]);return new a(c)}function g(){for(var c=[],d=0;d<this.items.length;d++){for(var e=!1,f=0;f<c.length;f++)if(b(c[f],this.items[d])){e=!0;break}e||c.push(this.items[d])}return new a(c)}function h(b){if(!b)throw new Error("Expression is invalid");for(var c=function(a,c){var d=b(a),e=b(c);return e>d?-1:d>e?1:0},d=[],e=0;e<this.items.length;e++)d.push(this.items[e]);var f=d.sort(c);return new a(f)}function i(b){if(!b)throw new Error("Expression is invalid");var c=a(this.items).orderBy(b).toList(),d=c.reverse();return new a(d)}function j(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){var e=b(this.items[d]);if(!e){c.push(e);break}for(var f=0;f<e.length;f++)c.push(e[f])}return new a(c)}function k(b){var c;if(c=b?a(this.items).where(b).toList():this.items,0===c.length)return null;if(1==c.length)return c[0];throw new Error("Sequence contains "+c.length+" matching elements")}function l(b){var c;return c=b?a(this.items).where(b).toList():this.items,0===c.length?null:c[0]}function m(b){var c;return c=b?a(this.items).where(b).toList():this.items,0===c.length?null:c[c.length-1]}function n(b){var c;return c=b?a(this.items).where(b).toList():this.items,c.length>0}function o(b){var c;return c=b?a(this.items).where(b).toList():this.items,c.length==this.items.length}function p(){return this.items}function q(){return this.items.length}function r(b){if(0>b)throw new Error("Value must be greater or equals zero");for(var c=[],d=0;d<this.items.length;d++)c.push(this.items[d]);var e=c.slice(b);return new a(e)}function s(b){if(0>b)throw new Error("Value must be greater or equals zero");for(var c=[],d=0;d<this.items.length;d++)c.push(this.items[d]);var e=c.slice(0,b);return new a(e)}function t(b){var c;return c=b?a(this.items).select(b).toList():this.items,0===c.length?null:(c=a(c).orderBy(function(a){return a}).toList(),c[c.length-1])}function u(b){var c;return c=b?a(this.items).select(b).toList():this.items,0===c.length?null:(c=a(c).orderBy(function(a){return a}).toList(),c[0])}function v(c,d){if(!c)return new a([]);for(var e=[],f=0;f<this.items.length;f++)for(var g=this.items[f],h=0;h<c.length;h++){var i=c[h],j=!1;if(d){var k=d(g),l=d(i);j=b(k,l)}else j=b(g,i);j&&e.push(g)}return new a(e)}function w(c){if(!c)return new a(this.items);for(var d=[],e=0;e<this.items.length;e++)b(this.items[e],c)||d.push(this.items[e]);return new a(d)}function x(c,d){if(!c)return new a([]);for(var e=[],f=0;f<this.items.length;f++){for(var g=this.items[f],h=!1,i=0;i<c.length;i++)if(!h){var j=c[i],k=!1;if(d){var l=d(g),m=d(j);k=b(l,m)}else k=b(g,j);k&&(h=!0)}h||e.push(g)}return new a(e)}function y(b){if(!b)throw new Error("Expression is invalid");for(var c=a(this.items).select(b).toList(),d=0,e=0;e<c.length;e++){var f=c[e];if("number"!=typeof f)throw Error("Value '"+f+"' is not a number");d+=f}return d}function z(b){var c;if(c=b?a(this.items).select(b).toList():this.items,0===c.length)return null;for(var d=0,e=0;e<c.length;e++){if(isNaN(c[e]))throw new Error("Element '"+c[e]+"' (index:"+e+") is not a number");d=c[e]+d}var f=d/c.length;return f}function A(b){return new a(b)}return A});